import matplotlib.pyplot as plt
import pandas as pd

# 数据
data = {
    # "1974": {"zh": 472}, "1983": {"ar": 158, "de": 166}, "1985": {"es": 3233, "fr": 2511}, 
    # "1986": {"es": 3645, "fr": 1205}, 
    # "1992": {"ar": 6225, "en": 384, "es": 6586, "fr": 6251, "ru": 65}, 
    # "1993": {"ar": 28587, "en": 5113, "es": 41887, "fr": 30563, "ru": 5473}, 
    # "1994": {"ar": 1093, "en": 1514, "es": 1535, "fr": 1605, "ru": 739}, 
    # "1995": {"ar": 341, "en": 120, "es": 50, "fr": 53, "ru": 363}, 
    # "1996": {"ar": 2858, "en": 4163, "es": 2483, "fr": 4038, "ru": 3303, "zh": 1050}, 
    # "1997": {"ar": 1867, "en": 3185, "es": 1570, "fr": 2194, "ru": 2315, "zh": 321}, 
    # "1998": {"ar": 9459, "en": 10248, "es": 11052, "fr": 9576, "ru": 11780, "zh": 10436}, 
    "1999": {"ar": 105736, "de": 624, "en": 106843, "es": 113729, "fr": 115472, "ru": 119918, "zh": 105611}, 
    "2000": {"ar": 804319, "de": 25886, "en": 748998, "es": 837967, "fr": 826132, "ru": 836775, "zh": 782132}, 
    "2001": {"ar": 773382, "de": 21633, "en": 730290, "es": 815544, "fr": 795065, "ru": 808974, "zh": 776360}, 
    "2002": {"ar": 760550, "de": 22434, "en": 736818, "es": 815909, "fr": 808566, "ru": 835228, "zh": 776509}, 
    "2003": {"ar": 724075, "de": 35053, "en": 728412, "es": 751558, "fr": 750238, "ru": 769601, "zh": 721510}, 
    "2004": {"ar": 760064, "de": 20442, "en": 751158, "es": 790289, "fr": 794979, "ru": 810936, "zh": 764726}, 
    "2005": {"ar": 731450, "de": 17645, "en": 728155, "es": 751019, "fr": 744644, "ru": 758121, "zh": 733389}, 
    "2006": {"ar": 778723, "de": 18068, "en": 765380, "es": 781460, "fr": 781557, "ru": 802112, "zh": 776136}, 
    "2007": {"ar": 736283, "de": 17619, "en": 742071, "es": 752742, "fr": 753619, "ru": 773130, "zh": 747773}, 
    "2008": {"ar": 849709, "de": 16423, "en": 849206, "es": 864265, "fr": 866154, "ru": 865146, "zh": 858977}, 
    "2009": {"ar": 835909, "de": 9919, "en": 846826, "es": 858046, "fr": 853155, "ru": 853547, "zh": 858096}, 
    "2010": {"ar": 913137, "de": 14327, "en": 931747, "es": 931408, "fr": 949379, "ru": 939310, "zh": 942627}, 
    "2011": {"ar": 922020, "de": 33103, "en": 928358, "es": 920213, "fr": 948404, "ru": 952036, "zh": 946066}, 
    "2012": {"ar": 828584, "de": 20531, "en": 843403, "es": 829511, "fr": 867228, "ru": 859611, "zh": 855197}, 
    "2013": {"ar": 872897, "de": 32423, "en": 872425, "es": 849808, "fr": 886250, "ru": 883496, "zh": 886670}, 
    "2014": {"ar": 854433, "de": 25378, "en": 844870, "es": 813319, "fr": 874407, "ru": 857828, "zh": 846516}, 
    "2015": {"ar": 339489, "de": 29758, "en": 343297, "es": 278200, "fr": 341917, "ru": 308920, "zh": 324196}, 
    "2016": {"ar": 354394, "de": 23800, "en": 383961, "es": 348188, "fr": 396556, "ru": 349636, "zh": 393444}, 
    "2017": {"ar": 828920, "de": 13460, "en": 826357, "es": 850377, "fr": 841971, "ru": 860107, "zh": 885260}, 
    "2018": {"ar": 763287, "de": 20469, "en": 782400, "es": 803396, "fr": 802283, "ru": 805228, "zh": 841708}, 
    "2019": {"ar": 832959, "de": 13092, "en": 843308, "es": 869351, "fr": 870787, "ru": 873634, "zh": 906633}, 
    "2020": {"ar": 718523, "de": 13118, "en": 742462, "es": 778449, "fr": 786765, "ru": 758966, "zh": 819235}, 
    "2021": {"ar": 808149, "de": 10269, "en": 835448, "es": 867224, "fr": 885168, "ru": 844799, "zh": 922141}, 
    "2022": {"ar": 789219, "de": 10952, "en": 811357, "es": 845042, "fr": 861091, "ru": 833528, "zh": 882445}, 
    "2023": {"ar": 339021, "de": 3295, "en": 347145, "es": 364575, "fr": 366557, "ru": 356634, "zh": 379615}, 
    # "2024": {"ar": 82, "en": 82, "es": 81, "fr": 81, "ru": 81, "zh": 81}, 
    # "2025": {"ar": 229, "en": 373, "es": 373, "fr": 373, "ru": 373, "zh": 373}
}

# 构造 DataFrame
df = pd.DataFrame.from_dict(data, orient='index').sort_index().fillna(0)

# 绘制折线图
fig, ax = plt.subplots(figsize=(12, 6))
for lang in df.columns:
    ax.plot(df.index.astype(int), df[lang], label=lang)

ax.set_title('Paragraphs per Language Over Years')
ax.set_xlabel('Year')
ax.set_ylabel('Total Paragraphs')
ax.legend(loc='upper left')
plt.xticks(rotation=45)
plt.tight_layout()
# plt.show()
plt.savefig(__file__.replace(".py",".pdf"), format="pdf")