import matplotlib.pyplot as plt
import pandas as pd

# 数据
data = {
    # "1974": {"zh": 1}, 
    # "1983": {"ar": 1, "de": 1}, 
    # "1985": {"es": 18, "fr": 21}, 
    # "1986": {"es": 14, "fr": 6}, 
    # "1992": {"ar": 28, "en": 3, "es": 27, "fr": 17, "ru": 3}, 
    # "1993": {"ar": 196, "en": 88, "es": 200, "fr": 121, "ru": 40}, 
    # "1994": {"ar": 8, "en": 10, "es": 11, "fr": 10, "ru": 7}, 
    # "1995": {"ar": 2, "en": 1, "es": 1, "fr": 1, "ru": 2}, 
    # "1996": {"ar": 3, "en": 6, "es": 3, "fr": 4, "ru": 5, "zh": 2}, 
    # "1997": {"ar": 14, "en": 15, "es": 12, "fr": 14, "ru": 14, "zh": 4}, 
    # "1998": {"ar": 35, "en": 34, "es": 35, "fr": 34, "ru": 35, "zh": 36}, 
    "1999": {"ar": 508, "de": 9, "en": 513, "es": 513, "fr": 515, "ru": 519, "zh": 494}, 
    "2000": {"ar": 7546, "de": 426, "en": 7526, "es": 7516, "fr": 7556, "ru": 7556, "zh": 7447}, 
    "2001": {"ar": 7417, "de": 399, "en": 7350, "es": 7404, "fr": 7408, "ru": 7400, "zh": 7409}, 
    "2002": {"ar": 7837, "de": 502, "en": 7805, "es": 7832, "fr": 7812, "ru": 7848, "zh": 7848}, 
    "2003": {"ar": 7358, "de": 632, "en": 7348, "es": 7346, "fr": 7349, "ru": 7367, "zh": 7383}, 
    "2004": {"ar": 7184, "de": 464, "en": 7195, "es": 7192, "fr": 7192, "ru": 7189, "zh": 7207}, 
    "2005": {"ar": 6881, "de": 442, "en": 6903, "es": 6878, "fr": 6887, "ru": 6889, "zh": 6900}, 
    "2006": {"ar": 7126, "de": 447, "en": 7135, "es": 7114, "fr": 7111, "ru": 7119, "zh": 7148}, 
    "2007": {"ar": 6787, "de": 384, "en": 6819, "es": 6796, "fr": 6811, "ru": 6826, "zh": 6840}, 
    "2008": {"ar": 7087, "de": 353, "en": 7117, "es": 7098, "fr": 7113, "ru": 7088, "zh": 7138}, 
    "2009": {"ar": 6762, "de": 219, "en": 6798, "es": 6802, "fr": 6769, "ru": 6769, "zh": 6843}, 
    "2010": {"ar": 7465, "de": 289, "en": 7553, "es": 7478, "fr": 7535, "ru": 7514, "zh": 7543}, 
    "2011": {"ar": 7626, "de": 547, "en": 7791, "es": 7654, "fr": 7771, "ru": 7774, "zh": 7797}, 
    "2012": {"ar": 7479, "de": 382, "en": 7616, "es": 7481, "fr": 7608, "ru": 7617, "zh": 7626}, 
    "2013": {"ar": 7427, "de": 532, "en": 7608, "es": 7408, "fr": 7538, "ru": 7561, "zh": 7625}, 
    "2014": {"ar": 7305, "de": 328, "en": 7543, "es": 7188, "fr": 7559, "ru": 7473, "zh": 7457}, 
    "2015": {"ar": 3005, "de": 279, "en": 2800, "es": 2483, "fr": 2799, "ru": 2653, "zh": 2842}, 
    "2016": {"ar": 2768, "de": 220, "en": 2885, "es": 2652, "fr": 2969, "ru": 2719, "zh": 2950}, 
    "2017": {"ar": 7397, "de": 214, "en": 7566, "es": 7403, "fr": 7520, "ru": 7542, "zh": 7562}, 
    "2018": {"ar": 6924, "de": 176, "en": 7115, "es": 6925, "fr": 7091, "ru": 7093, "zh": 7103}, 
    "2019": {"ar": 7051, "de": 217, "en": 7187, "es": 7055, "fr": 7158, "ru": 7179, "zh": 7183}, 
    "2020": {"ar": 6165, "de": 195, "en": 6301, "es": 6178, "fr": 6300, "ru": 6281, "zh": 6294}, 
    "2021": {"ar": 6942, "de": 165, "en": 7061, "es": 6974, "fr": 7050, "ru": 7048, "zh": 7070}, 
    "2022": {"ar": 6987, "de": 159, "en": 7172, "es": 7000, "fr": 7069, "ru": 7148, "zh": 7145}, 
    "2023": {"ar": 3323, "de": 51, "en": 3439, "es": 3364, "fr": 3350, "ru": 3409, "zh": 3439}, 
    # "2024": {"ar": 1, "en": 1, "es": 1, "fr": 1, "ru": 1, "zh": 1}, 
    # "2025": {"ar": 1, "en": 2, "es": 2, "fr": 2, "ru": 2, "zh": 2}
}


# 构造 DataFrame
df = pd.DataFrame.from_dict(data, orient='index').sort_index().fillna(0)

# 绘制折线图
fig, ax = plt.subplots(figsize=(12, 6))
for lang in df.columns:
    ax.plot(df.index.astype(int), df[lang], label=lang)

ax.set_title('Files per Language Over Years')
ax.set_xlabel('Year')
ax.set_ylabel('Total Files')
ax.legend(loc='upper left')
plt.xticks(rotation=45)
plt.tight_layout()
# plt.show()
plt.savefig(__file__.replace(".py",".pdf"), format="pdf")