import matplotlib.pyplot as plt
import pandas as pd

# 数据
data = {
    # "1974": {"zh": 38237}, "1983": {"ar": 13988, "de": 21045}, "1985": {"es": 1219726, "fr": 933708},
    # "1986": {"es": 1608251, "fr": 506299}, "1992": {"ar": 1401307, "en": 36981, "es": 925094, "fr": 466497, "ru": 11921},
    # "1993": {"ar": 4999648, "en": 1064271, "es": 9141667, "fr": 7106649, "ru": 967794},
    # "1994": {"ar": 218889, "en": 282205, "es": 447209, "fr": 328369, "ru": 91066},
    # "1995": {"ar": 43163, "en": 21982, "es": 6353, "fr": 6401, "ru": 47379},
    # "1996": {"ar": 534934, "en": 782621, "es": 500845, "fr": 861846, "ru": 698595, "zh": 108904},
    # "1997": {"ar": 638871, "en": 657128, "es": 634233, "fr": 694644, "ru": 684639, "zh": 38127},
    # "1998": {"ar": 2223283, "en": 2387894, "es": 2793712, "fr": 2778894, "ru": 2698794, "zh": 1605520},
    "1999": {"ar": 41987702, "de": 106517, "en": 30061864, "es": 41183078, "fr": 38648462, "ru": 39017268, "zh": 12965811},
    "2000": {"ar": 225740694, "de": 6771399, "en": 230503877, "es": 290266841, "fr": 278345399, "ru": 275748059, "zh": 93503838},
    "2001": {"ar": 238945843, "de": 5485656, "en": 230893460, "es": 287010828, "fr": 291285643, "ru": 270109096, "zh": 97129359},
    "2002": {"ar": 228986467, "de": 6075206, "en": 231518151, "es": 306737668, "fr": 299894601, "ru": 302028734, "zh": 97278719},
    "2003": {"ar": 211701170, "de": 8697935, "en": 232721248, "es": 272315928, "fr": 271010339, "ru": 271331824, "zh": 93464504},
    "2004": {"ar": 230914593, "de": 5536586, "en": 254152627, "es": 311391816, "fr": 297849919, "ru": 288308666, "zh": 105030639},
    "2005": {"ar": 225403160, "de": 4923658, "en": 251873854, "es": 318448771, "fr": 319899397, "ru": 302343745, "zh": 104220158},
    "2006": {"ar": 248944177, "de": 5912690, "en": 273457884, "es": 323404970, "fr": 328744275, "ru": 321420392, "zh": 119601600},
    "2007": {"ar": 221674431, "de": 4698403, "en": 277032726, "es": 322542527, "fr": 315983616, "ru": 310600724, "zh": 114859802},
    "2008": {"ar": 259686486, "de": 4425389, "en": 357513991, "es": 401346242, "fr": 395804503, "ru": 358320251, "zh": 136745921},
    "2009": {"ar": 262607476, "de": 3274019, "en": 365442347, "es": 373644108, "fr": 363179132, "ru": 362474733, "zh": 130647347},
    "2010": {"ar": 288988947, "de": 4555938, "en": 388461976, "es": 405572684, "fr": 401087872, "ru": 397072532, "zh": 141857458},
    "2011": {"ar": 276350356, "de": 11332949, "en": 388758516, "es": 405839383, "fr": 398072672, "ru": 392844324, "zh": 136355962},
    "2012": {"ar": 239255126, "de": 5657017, "en": 334863167, "es": 369782325, "fr": 352808894, "ru": 338188071, "zh": 129844207},
    "2013": {"ar": 247930543, "de": 9653167, "en": 344928992, "es": 381170922, "fr": 368304834, "ru": 355390335, "zh": 128219046},
    "2014": {"ar": 241985871, "de": 16695290, "en": 341572217, "es": 378769678, "fr": 376401633, "ru": 354593388, "zh": 120641754},
    "2015": {"ar": 110735939, "de": 10232967, "en": 134128994, "es": 128293105, "fr": 151003978, "ru": 136298474, "zh": 49787455},
    "2016": {"ar": 124403997, "de": 7672794, "en": 175660143, "es": 180083642, "fr": 204252863, "ru": 170355044, "zh": 57810725},
    "2017": {"ar": 268577902, "de": 5465780, "en": 336824687, "es": 383722874, "fr": 390251161, "ru": 375931200, "zh": 130946745},
    "2018": {"ar": 261416189, "de": 11338984, "en": 307756063, "es": 342258126, "fr": 359824462, "ru": 346730208, "zh": 121514432},
    "2019": {"ar": 253510116, "de": 4777420, "en": 307335739, "es": 349326296, "fr": 362479464, "ru": 339745065, "zh": 120615276},
    "2020": {"ar": 238829290, "de": 4823633, "en": 291735852, "es": 329743374, "fr": 353695006, "ru": 332851096, "zh": 123945414},
    "2021": {"ar": 267163233, "de": 4100633, "en": 320952151, "es": 355557011, "fr": 383514256, "ru": 358031015, "zh": 131713464},
    "2022": {"ar": 272719291, "de": 4127438, "en": 318123188, "es": 352882730, "fr": 376706455, "ru": 373559549, "zh": 134263217},
    "2023": {"ar": 109430799, "de": 1218780, "en": 135068644, "es": 150615695, "fr": 151106727, "ru": 149927791, "zh": 54244746},
    # "2024": {"ar": 26093, "en": 29860, "es": 34708, "fr": 34758, "ru": 35770, "zh": 9173},
    # "2025": {"ar": 43871, "en": 89396, "es": 104113, "fr": 106119, "ru": 101886, "zh": 26240}
}

# 构造 DataFrame
df = pd.DataFrame.from_dict(data, orient='index').sort_index().fillna(0)

# 绘制折线图
fig, ax = plt.subplots(figsize=(12, 6))
for lang in df.columns:
    ax.plot(df.index.astype(int), df[lang], label=lang)

ax.set_title('Characters per Language Over Years')
ax.set_xlabel('Year')
ax.set_ylabel('Total Characters')
ax.legend(loc='upper left')
plt.xticks(rotation=45)
plt.tight_layout()
# plt.show()
plt.savefig(__file__.replace(".py",".pdf"), format="pdf")
